<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= hackathon.title %> Details</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .hackathon-card {
            max-width: 800px;
            margin: 2rem auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: none;
        }
        .hackathon-header {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 2rem;
            position: relative;
        }
        .hackathon-type-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1rem;
            padding: 0.5rem 1rem;
            border-radius: 50px;
        }
        .hackathon-body {
            padding: 2rem;
        }
        .detail-item {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }
        .detail-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        .detail-label {
            font-weight: 600;
            color: #666;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }
        .detail-label i {
            margin-right: 10px;
            font-size: 1.2rem;
        }
        .detail-value {
            font-size: 1.1rem;
        }
        .action-buttons {
            margin-top: 2rem;
        }
        .countdown {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1.5rem;
        }
        .countdown-item {
            text-align: center;
        }
        .countdown-value {
            font-size: 2rem;
            font-weight: 700;
            color: #2575fc;
        }
        .countdown-label {
            font-size: 0.8rem;
            color: #666;
            text-transform: uppercase;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container py-5">
        <div class="card hackathon-card">
            <div class="hackathon-header text-center">
                <span class="hackathon-type-badge bg-<%= hackathon.type === 'Online' ? 'info' : 'success' %>">
                    <i class="bi <%= hackathon.type === 'Online' ? 'bi-globe' : 'bi-geo-alt' %>"></i> <%= hackathon.type %>
                </span>
                <h1 class="display-5 fw-bold"><%= hackathon.title %></h1>
                <p class="mb-0">Created on: <%= hackathon.createdAt.toLocaleDateString() %></p>
            </div>
            
            <div class="hackathon-body">
                <!-- Theme -->
                <div class="detail-item">
                    <div class="detail-label">
                        <i class="bi bi-lightbulb"></i> Theme
                    </div>
                    <div class="detail-value">
                        <%= hackathon.theme %>
                    </div>
                </div>
                
                <!-- Date & Time -->
                <div class="detail-item">
                    <div class="detail-label">
                        <i class="bi bi-calendar-event"></i> Date & Time
                    </div>
                    <div class="detail-value">
                        <%= hackathon.date.toLocaleString() %>
                    </div>
                    <div class="countdown mt-3">
                        <div class="row text-center">
                            <div class="col countdown-item">
                                <div class="countdown-value" id="days">00</div>
                                <div class="countdown-label">Days</div>
                            </div>
                            <div class="col countdown-item">
                                <div class="countdown-value" id="hours">00</div>
                                <div class="countdown-label">Hours</div>
                            </div>
                            <div class="col countdown-item">
                                <div class="countdown-value" id="minutes">00</div>
                                <div class="countdown-label">Minutes</div>
                            </div>
                            <div class="col countdown-item">
                                <div class="countdown-value" id="seconds">00</div>
                                <div class="countdown-label">Seconds</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Venue (only for offline events) -->
                <% if (hackathon.type === 'Offline') { %>
                <div class="detail-item">
                    <div class="detail-label">
                        <i class="bi bi-geo-alt"></i> Venue
                    </div>
                    <div class="detail-value">
                        <%= hackathon.venue %>
                        <div class="mt-2">
                            <a href="https://maps.google.com?q=<%= encodeURIComponent(hackathon.venue) %>" 
                               target="_blank" class="btn btn-sm btn-outline-primary">
                                <i class="bi bi-map"></i> View on Map
                            </a>
                        </div>
                    </div>
                </div>
                <% } %>
                
                <!-- Online Details (only for online events) -->
                <% if (hackathon.type === 'Online') { %>
                <div class="detail-item">
                    <div class="detail-label">
                        <i class="bi bi-link"></i> Online Access
                    </div>
                    <div class="detail-value">
                        <p>This is an online event. Joining details will be shared with registered participants.</p>
                        <button class="btn btn-primary">
                            <i class="bi bi-calendar-plus"></i> Add to Calendar
                        </button>
                    </div>
                </div>
                <% } %>

                <div>
                    <div class="detail-label">
                        <i class="fa-solid fa-user-group"></i> Group Menber <%=hackathon.group_member%>
                    </div>
                    
                </div>
                <hr>
                
                <!-- Action Buttons -->
                <div class="action-buttons d-flex justify-content-between">
                    <a href="/hackathon/all" class="btn btn-outline-secondary">
                        <i class="bi bi-arrow-left"></i> Back to List
                    </a>
                    <div>
                        <a href="/hackathon/<%= hackathon._id %>/findteammate" class="btn btn-success">
                            <i class="bi bi-person-plus"></i> Find Team-Mate
                        </a>
                        <a href="/hackathon/<%= hackathon._id %>/register" class="btn btn-success">
                            <i class="bi bi-person-plus"></i> Register Now
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Countdown Timer Script -->
    <script>
        // Set the date we're counting down to
        const eventDate = new Date("<%= hackathon.date.toISOString() %>").getTime();
        
        // Update the countdown every 1 second
        const countdown = setInterval(function() {
            const now = new Date().getTime();
            const distance = eventDate - now;
            
            // Time calculations for days, hours, minutes and seconds
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            
            // Display the result
            document.getElementById("days").innerHTML = days.toString().padStart(2, "0");
            document.getElementById("hours").innerHTML = hours.toString().padStart(2, "0");
            document.getElementById("minutes").innerHTML = minutes.toString().padStart(2, "0");
            document.getElementById("seconds").innerHTML = seconds.toString().padStart(2, "0");
            
            // If the countdown is finished
            if (distance < 0) {
                clearInterval(countdown);
                document.querySelector(".countdown").innerHTML = `
                    <div class="alert alert-success text-center">
                        <i class="bi bi-check-circle-fill"></i> This hackathon is currently in progress or has ended!
                    </div>
                `;
            }
        }, 1000);
    </script>
</body>
</html>